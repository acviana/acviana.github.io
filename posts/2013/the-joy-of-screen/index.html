<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>The Joy of "Screen"</title>
  <meta name="author" content="Alex C. Viana">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://acviana.github.io/favicon.png" rel="icon">
  <link href="http://acviana.github.io/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://acviana.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="http://acviana.github.io/theme/js/ender.js"></script>
  <script src="http://acviana.github.io/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://acviana.github.io/">The Other Side of the Screen</a></h1>
    <h2>"On the other side of the screen it all seems so easy." - Tron (1982)</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://acviana.github.io/" rel="subscribe-rss">RSS</a></li>
</ul>

<!-- TODO: add search here
<form action="" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:http://acviana.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
-->

<ul class="main-navigation">
      <li><a href="http://acviana.github.io/pages/about.html">About</a></li>
      <li><a href="http://acviana.github.io/pages/disclaimer.html">Disclaimer</a></li>
    <!-- TODO: add categories here? -->
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">The Joy of "Screen"</h1>
      <p class="meta"><time datetime="2013-11-24T00:00:00" pubdate>2013-11-24</time></p>
</header>

  <div class="entry-content"><p>Because I frequently work remotely as well as run long processes I recently gave up my desktop system at work in exchange for a laptop and a couple of virtual machines. I use the laptop for day-to-day work but offload longer computations or automated processes to my VMs. But before I could fully take advantage of this setup  I had to solve a new problem I didn't have to worry about with my desktop, how do I run a process remotely without maintaining an open SSH connection? </p>
<p>I went to our IT department with this question and my favorite sys admin<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> turned me onto the joy of <a href="http://en.wikipedia.org/wiki/GNU_Screen">Screen</a>. Since then I've been spreading the word around my branch about this awesome little tool. Screen is a robust little piece of software that allows you to manage your shell session in a variety of ways. Screen can do a lot and it's worth taking the time to read through some tutorials but I'll explain my basic workflow in this post to start a process on a remote host and leave it running after closing the SSH connection. </p>
<p>First you SSH into you remote machine as normal and then type</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">screen</span> <span class="o">-</span><span class="n">ls</span>
</pre></div>


<p>This is going to return a list of all the Screen<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup> sessions you have active on your machine. If this is your first time using screen you should see something like <code>No Sockets found in ...</code>. Great, now we're going to start up our first Screen session, I'm going to call this one <code>making_science</code>, so then I type:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">screen</span> <span class="o">-</span><span class="n">S</span> <span class="n">making_science</span>
</pre></div>


<p>And then you'll get a new command line prompt, you are now "in" your Screen session, or as Screen calls it "attached". If you run <code>screen -ls</code> again you'll now get something like this:</p>
<div class="highlight"><pre><span class="n">there</span> <span class="n">is</span> <span class="n">a</span> <span class="n">screen</span> <span class="n">on</span><span class="o">:</span>
        <span class="mf">48625.</span><span class="n">making_science</span>    <span class="p">(</span><span class="n">Attached</span><span class="p">)</span>
<span class="mi">1</span> <span class="n">Socket</span> <span class="n">in</span> <span class="n">blah</span><span class="o">-</span><span class="n">blah</span>
</pre></div>


<p>Now go ahead and launch your long script, I usually run it in the background by appending script with an ampersand (<code>&amp;</code>) like this:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">make_some_science</span><span class="p">.</span><span class="n">py</span> <span class="o">&amp;</span>
</pre></div>


<p>And now we finally get to the good part, we're going to detach the session without killing the process, even if you close the SSH connection. You can do this either by typing <code>ctrl + a</code> then <code>:detach</code>,  or if you don't have those key bindings, <code>screen -D</code>. Anytime you want to check back in one it just reattach your screen session on the same host with <code>screen -r</code> and everything will be just as you left it, even your command history. When you're finally done with your session you can just kill it with <code>exit</code> and it'll be removed from your list of screens.</p>
<p>Lastly, if like me you're suspicious by nature, you're going to want to check to make sure your process is <em>actualy</em> still running so you don't die a little inside when you come back to work the next morning expecting a pile of fresh data and instead get a stack trace. There are a variety of tools that allow you to do this, the two command line solutions I use are <code>top</code> <sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup> and <code>ps</code>. Either one will list the processed currently running on your machine. I usually start up a process with screen, detach the session, confirm that the process is still running with <code>top</code> or <code>ps</code> and <em>then</em> close the SSH connection. If I'm feeling extra careful I'll check the log files from another host after closing th SSH to make sure things are still humming along. </p>
<p>And that's it. Go ask your IT department very nicely if they can build you a VM and then unleash your codebase while you go about your life. Horray! </p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>If you're going to do any serious DevOps work make friends with you IT staff. Ask them for help nicely and thank them profusely. Buy them beers. A good relationship with your sys admins in invaluable to getting sh*t done. This really shouldn't even be a footnote.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Screen is inconsistently capitalized in the websites and blogs I saw. I decided to follow the convention in the GNU <a href="https://www.gnu.org/software/screen/">docs</a> and treat it as a proper noun. I bring this up here because this is the first place in this post where Screen isn't capitalized because it starts a sentence. I also bring it up because I'm a nerd.&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Depending on your version of <code>top</code> you can type <code>u</code> on the main screen and then your username to view all the processes being run by your user name. Given that <code>top</code> shows all the system processes this helps remove all the ones you don't care about.&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Alex C. Viana</span>
  </span>
<time datetime="2013-11-24T00:00:00" pubdate>2013-11-24</time>  <span class="categories">
    <a class="category" href="http://acviana.github.io/tag/devops.html">devops</a>
  </span>
</p>    </footer>
  </article>
  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://acviana.github.io/posts/2014/2014-summer-internship-opportunity/">2014 Summer Internship Opportunity</a>
      </li>
      <li class="post">
          <a href="http://acviana.github.io/posts/2013/guilty-as-charged/">Guilty As Charged</a>
      </li>
      <li class="post">
          <a href="http://acviana.github.io/posts/2013/that-time-i-made-a-metaclass/">That Time I Made a Metaclass</a>
      </li>
      <li class="post">
          <a href="http://acviana.github.io/posts/2013/the-joy-of-screen/">The Joy of "Screen"</a>
      </li>
      <li class="post">
          <a href="http://acviana.github.io/posts/2013/a-basic-automation-setup/">A Basic Automation Setup for Astronomy: Part 1</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://acviana.github.io/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://acviana.github.io/tag/uvis.html">uvis</a>,    <a href="http://acviana.github.io/tag/code.html">code</a>,    <a href="http://acviana.github.io/tag/humor.html">humor</a>,    <a href="http://acviana.github.io/tag/mtpipeline.html">mtpipeline</a>,    <a href="http://acviana.github.io/tag/python.html">python</a>,    <a href="http://acviana.github.io/tag/wfc3.html">wfc3</a>,    <a href="http://acviana.github.io/tag/database.html">database</a>,    <a href="http://acviana.github.io/tag/psf.html">psf</a>,    <a href="http://acviana.github.io/tag/devops.html">devops</a>,    <a href="http://acviana.github.io/tag/wfpc2.html">wfpc2</a>,    <a href="http://acviana.github.io/tag/acs.html">acs</a>,    <a href="http://acviana.github.io/tag/jwst.html">jwst</a>,    <a href="http://acviana.github.io/tag/git.html">git</a>,    <a href="http://acviana.github.io/tag/hst.html">hst</a>,    <a href="http://acviana.github.io/tag/milestones.html">milestones</a>,    <a href="http://acviana.github.io/tag/plots.html">plots</a>,    <a href="http://acviana.github.io/tag/pelican.html">pelican</a>  </section>


    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="http://acviana.github.io/" type="application/rss+xml" rel="alternate">RSS</a></li>
            <li><a href="https://twitter.com/AlexVianaPro" target="_blank">Twitter</a></li>
            <li><a href="https://github.com/acviana" target="_blank">GitHub</a></li>
            <li><a href="http://www.linkedin.com/pub/alex-viana/49/1b8/83" target="_blank">LinkedIn</a></li>
            <li><a href="http://stackoverflow.com/users/1216837/acv" target="_blank">StackOverflow</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h2>
        <ul>
            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
            <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
            <li><a href="http://software-carpentry.org/" target="_blank">Software Carpentry</a></li>
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Alex C. Viana -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45960611-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45960611-1');
    ga('send', 'pageview');
</script>
	<script type="text/javascript">
	  var disqus_shortname = 'theothersideofthescreen';
          var disqus_identifier = '/posts/2013/the-joy-of-screen/';
          var disqus_url = 'http://acviana.github.io/posts/2013/the-joy-of-screen/';
          var disqus_title = 'The Joy of "Screen"';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>